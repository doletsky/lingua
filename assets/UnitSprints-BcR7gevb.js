import{_ as C,u as b,a as B,c as G,b as I,r as v,o as N,d as a,e as o,f as h,t as c,F as R,g as A,h as P,i as r}from"./index-MJFMpcdq.js";const $={class:"unit-sprints"},q={class:"unit-header"},F={key:0},M={key:0,class:"loading"},V={key:1,class:"empty"},D={key:2,class:"sprints-grid"},E={class:"card-header"},H={class:"grammar-title"},L={class:"meta"},O={key:0},j={key:1},z={key:0,class:"grammar-desc"},J={class:"card-actions"},K=["onClick"],Q=["onClick"],T={__name:"UnitSprints",setup(W){const w=I(),g=P(),u=b(),d=B(),m=G(()=>{const t=w.params.unitId;if(t&&typeof t=="string")return t;const e=d.currentUnit;return typeof e=="string"?e:e&&e.value?e.value:String(e)}),y=v(!0),_=v([]),f=v(null),l=v({});N(async()=>{y.value=!0;try{await u.loadAll();const t=m.value;let e=[];try{const n=u.getGrammarByUnit;n&&typeof n.value=="function"?e=n.value(t)||[]:e=(u.grammar||[]).filter(i=>i.unit===t)}catch(n){console.warn("[UnitSprints] ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ°Ñ‚Ğ¸Ğº Ñ‡ĞµÑ€ĞµĞ· getter:",n),e=(u.grammar||[]).filter(i=>i.unit===t)}_.value=e,f.value={name:`Ğ®Ğ½Ğ¸Ñ‚ ${String(t).replace("unit","")}`};const s=await d.getSprintHistoryByUnit(t),p={};for(const n of _.value){const i=s.filter(S=>S.exerciseResults&&S.exerciseResults.some(k=>k.snapshot&&k.snapshot.grammarId===n.id));p[n.id]={timesPracticed:i.length,lastAccuracy:i.length>0?i[0].stats.accuracy:null}}l.value=p}catch(t){console.error("[UnitSprints] ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ ÑĞ¿Ñ€Ğ¸Ğ½Ñ‚Ğ¾Ğ² ÑĞ½Ğ¸Ñ‚Ğ°:",t)}finally{y.value=!1}});const U=async t=>{await d.setCurrentUnit(m.value);try{await g.push({name:"Sprint",query:{grammarId:t}})}catch(e){console.error("[UnitSprints] Navigation error:",e)}},x=async t=>{try{await d.setCurrentUnit(m.value),await g.push({name:"Sprint",query:{grammarId:t,viewOnly:!0}})}catch(e){console.error("[UnitSprints] Navigation error on viewGrammar:",e)}};return(t,e)=>(r(),a("div",$,[o("header",q,[o("h2",null,"ğŸ“š Ğ¡Ğ¿Ñ€Ğ¸Ğ½Ñ‚Ñ‹ â€” "+c(m.value),1),f.value?(r(),a("p",F,c(f.value.name),1)):h("",!0)]),y.value?(r(),a("div",M,"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...")):_.value.length===0?(r(),a("div",V,"Ğ“Ñ€Ğ°Ğ¼Ğ¼Ğ°Ñ‚Ğ¸ĞºĞ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑĞ½Ğ¸Ñ‚Ğ°")):(r(),a("div",D,[(r(!0),a(R,null,A(_.value,s=>(r(),a("div",{key:s.id,class:"grammar-card"},[o("div",E,[o("h3",H,c(s.title),1),o("div",L,[l.value[s.id]?(r(),a("span",O,"â±ï¸ "+c(l.value[s.id].timesPracticed)+"Ã—",1)):h("",!0),l.value[s.id]?(r(),a("span",j,"ğŸ“Š "+c(l.value[s.id].lastAccuracy||"â€”")+"%",1)):h("",!0)])]),s.excerpt?(r(),a("p",z,c(s.excerpt),1)):h("",!0),o("div",J,[o("button",{onClick:p=>U(s.id),class:"btn-start"},"â–¶ï¸ ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ ÑĞ¿Ñ€Ğ¸Ğ½Ñ‚",8,K),o("button",{onClick:p=>x(s.id),class:"btn-view"},"ğŸ‘€ ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€",8,Q)])]))),128))]))]))}},Z=C(T,[["__scopeId","data-v-0674449b"]]);export{Z as default};
